<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GRING自動お見積り</title>
<style>
* {
box-sizing: border-box;
margin: 0;
padding: 0;
font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
}
body {
background-color: #F0F1F2;
color: #25282A;
line-height: 1.6;
}
.container {
max-width: 1200px;
margin: 0 auto;
padding: 20px;
}
.header {
text-align: center;
margin-bottom: 30px;
}
.header h1 {
font-size: 2rem;
color: #424649;
margin-bottom: 10px;
}
.content {
display: flex;
flex-wrap: wrap;
gap: 20px;
}
.form-section {
flex: 1 1 60%;
background-color: #FFFFFF;
border-radius: 8px;
padding: 20px;
box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}
.result-section {
flex: 1 1 35%;
background-color: #FFFFFF;
border-radius: 8px;
padding: 20px;
box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
position: sticky;
top: 20px;
max-height: calc(100vh - 40px);
overflow-y: auto;
}
.section-title {
color: #424649;
margin-bottom: 15px;
border-bottom: 2px solid #8A9195;
padding-bottom: 8px;
}
.form-group {
margin-bottom: 20px;
}
.option-group {
border-left: 3px solid #8A9195;
padding-left: 15px;
margin-bottom: 10px;
}
.option-item {
display: flex;
align-items: center;
margin-bottom: 8px;
}
.radio-group {
margin-bottom: 10px;
}
.radio-label {
display: flex;
align-items: center;
cursor: pointer;
margin-bottom: 8px;
padding: 8px 12px;
border-radius: 4px;
transition: background-color 0.2s;
}
.radio-label:hover {
background-color: #61685C;
color: #FFFFFF;
}
input[type="radio"] {
margin-right: 10px;
}
input[type="radio"]:checked + span {
font-weight: bold;
}
.radio-label.selected {
background-color: #61685C;
color: #FFFFFF;
}
.checkbox-label {
display: flex;
align-items: center;
cursor: pointer;
margin-bottom: 6px;
padding: 6px 10px;
border-radius: 4px;
transition: background-color 0.2s;
}
.checkbox-label:hover {
background-color: #61685C;
color: #FFFFFF;
}
input[type="checkbox"] {
margin-right: 10px;
}
.description {
font-size: 0.9rem;
margin-top: 4px;
color: #8A9195;
}
.package-description {
font-size: 0.9rem;
margin: 4px 0 12px 32px;
color: #8A9195;
padding-left: 10px;
border-left: 2px solid #E7E7EA;
white-space: pre-wrap;
}
select {
width: 100%;
padding: 10px;
border: 1px solid #8A9195;
border-radius: 4px;
background-color: #FFFFFF;
font-size: 1rem;
}
.result-item {
margin-bottom: 15px;
padding-bottom: 15px;
border-bottom: 1px solid #E7E7EA;
}
.result-item:last-child {
border-bottom: none;
}
.result-category {
font-weight: bold;
margin-bottom: 8px;
}
.result-detail {
display: flex;
justify-content: space-between;
margin-bottom: 4px;
padding-left: 10px;
}
.total-price {
font-size: 1.5rem;
font-weight: bold;
text-align: right;
margin-top: 20px;
padding-top: 10px;
border-top: 2px solid #8A9195;
}
.btn {
display: inline-block;
padding: 10px 20px;
background-color: #424649;
color: white;
border: none;
border-radius: 4px;
font-size: 0.95rem;
font-weight: bold;
cursor: pointer;
text-decoration: none;
text-align: center;
transition: background-color 0.2s;
margin-right: 10px;
}
.btn:hover {
background-color: #61685C;
}
.btn-accent {
background-color: #C8C8C0;
color: #25282A;
}
.btn-accent:hover {
background-color: #b9b9b0;
}
.actions {
display: flex;
align-items: center;
margin-top: 20px;
flex-wrap: wrap;
}
.copy-success {
color: #61685C;
margin-left: 10px;
font-size: 0.9rem;
}
.helper-text {
margin-left: 10px;
font-size: 0.9rem;
color: #8A9195;
}
/* レスポンシブデザイン */
@media (max-width: 768px) {
.content {
flex-direction: column;
}
.result-section {
position: static;
max-height: none;
overflow-y: visible;
}
}
</style>
</head>
<body>
<div id="root"></div>
<script src="https://cdn.jsdelivr.net/npm/react@17/umd/react.development.js"></script>
<script src="https://cdn.jsdelivr.net/npm/react-dom@17/umd/react-dom.development.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
<script type="text/babel">
// 料金プランデータ
const basePlans = [
  {
    id: 'all-in',
    name: 'オールインパッケージプラン',
    price: 330000,
    description: 'プラン内容：撮影(写真・ムービー)・ヘアメイク・ムービー編集・Ishibashi Seiya指名料・ロケーション1ヶ所(移動費込/施設利用料を除く)・新郎新婦衣装・装飾小物(使い放題)・ブーケ1点\n ※追加費用：スタジオ撮影の場合の施設利用料、遠方撮影の場合の移動費'
  },
  {
    id: 'photo-movie-hairmake',
    name: '写真+ムービー+ヘアメイクプラン',
    price: 258500
  },
  {
    id: 'photo-hairmake',
    name: '写真+ヘアメイクプラン',
    price: 148500
  },
  {
    id: 'movie-hairmake',
    name: 'ムービー+ヘアメイクプラン',
    price: 192500
  },
  {
    id: 'photo-movie',
    name: '写真+ムービープラン',
    price: 220000
  },
  {
    id: 'movie-only',
    name: 'ムービーのみプラン',
    price: 143000
  },
  {
    id: 'photo-only',
    name: '写真撮影のみプラン',
    price: 99000
  },
];

const options = [
  {
    id: 'two-locations',
    name: '2ロケーション撮影(洋館 & forest and sea location)',
    price: 55000,
    description: '※施設利用料及び移動費含む'
  },
  {
    id: 'bride-rental',
    name: '新婦衣装レンタル',
    price: 33000
  },
  {
    id: 'groom-rental',
    name: '新郎衣装レンタル',
    price: 33000
  },
  {
    id: 'ishibashi-shimei',
    name: 'Isibasi Seiya 指名',
    price: 22000
  },
  {
    id: 'weekend-fee',
    name: '土日祝日撮影料',
    price: 22000
  },
  {
    id: 'photo-rush',
    name: '写真お急ぎデータ納品',
    price: 16500
  },
  {
    id: 'movie-rush',
    name: 'ムービーお急ぎデータ納品',
    price: 16500
  },
  {
    id: 'remote-shoot',
    name: '東京・神奈川・千葉・埼玉・茨城以外の撮影',
    price: 0,
    description: '日帰りが難しい場合は宿泊費として¥11,000を一律。１人分の往復交通費は別途ご相談'
  },
];

const locations = [
  {
    id: 'sandy-ocean',
    name: 'sandy Ocean location (千葉)',
    price: 11000
  },
  {
    id: 'forest-sea',
    name: 'forest and sea location(千葉)',
    price: 5500
  },
  {
    id: 'strata-ocean',
    name: 'strata Ocean location (千葉)',
    price: 10000
  },
  {
    id: 'rocky-ocean-kana',
    name: 'rocky Ocean location (神奈川)',
    price: 22000
  },
  {
    id: 'rocky-island-kana',
    name: 'Rocky island location (神奈川)',
    price: 22000
  },
  {
    id: 'lake-forest-tokyo',
    name: 'Lake and forest location (東京)',
    price: 11000
  },
  {
    id: 'deep-forest-iba',
    name: 'Deep Forest Location (茨城)',
    price: 5500
  },
  {
    id: 'cliffside-ocean-chiba',
    name: 'Cliffside Ocean Location(千葉)',
    price: 16500
  },
  {
    id: 'drivein-beach-chiba',
    name: 'Drive-in Beach Location(千葉)',
    price: 11000
  },
  {
    id: 'classic-villa-chiba',
    name: 'Classic Villa Location(千葉)',
    price: 38500,
    description: '施設利用料 ¥33,000+移動費¥5,500'
  },
];

// PlanSelector コンポーネント
function PlanSelector({ selectedPlan, onPlanChange }) {
  const packagePlanDescription = basePlans.find(plan => plan.id === 'all-in').description;
  return (
    <div className="form-group">
      <h3 className="section-title">基本プラン選択</h3>
      <div className="radio-group">
        {basePlans.map((plan) => (
          <>
            <label
              key={plan.id}
              className={`radio-label ${selectedPlan === plan.id ? 'selected' : ''}`}
            >
              <input
                type="radio"
                name="plan"
                value={plan.id}
                checked={selectedPlan === plan.id}
                onChange={() => onPlanChange(plan.id)}
              />
              <span>{plan.name} - ¥{plan.price.toLocaleString()}</span>
            </label>
            {plan.id === 'all-in' && (
              <div className="package-description">
                {packagePlanDescription}
              </div>
            )}
          </>
        ))}
      </div>
      {selectedPlan && selectedPlan !== 'all-in' && basePlans.find(plan => plan.id === selectedPlan).description && (
        <div className="description">
          {basePlans.find(plan => plan.id === selectedPlan).description}
        </div>
      )}
    </div>
  );
}

// OptionSelector コンポーネント
function OptionSelector({ selectedPlan, selectedOptions, onOptionChange }) {
  // オールインパッケージプランに含まれるオプションID
  const includedInAllInPackage = ['bride-rental', 'groom-rental', 'ishibashi-shimei'];
  
  return (
    <div className="form-group">
      <h3 className="section-title">オプション選択</h3>
      <div className="option-group">
        {options.map((option) => {
          // オールインパッケージプラン選択時の特別処理
          const isIncludedInPlan = selectedPlan === 'all-in' && includedInAllInPackage.includes(option.id);
          return (
            <label
              key={option.id}
              className="checkbox-label"
              style={{ opacity: isIncludedInPlan ? 0.7 : 1 }}
            >
              <input
                type="checkbox"
                value={option.id}
                checked={isIncludedInPlan || selectedOptions.includes(option.id)}
                onChange={() => onOptionChange(option.id)}
                disabled={isIncludedInPlan}
              />
              <div>
                <div>
                  {option.name} {option.price > 0 ? `- ¥${option.price.toLocaleString()}` : ''}
                </div>
                {option.description && (
                  <div className="description">{option.description}</div>
                )}
              </div>
            </label>
          );
        })}
      </div>
    </div>
  );
}

// LocationSelector コンポーネント
function LocationSelector({ selectedLocation, onLocationChange }) {
  return (
    <div className="form-group">
      <div style={{ display: 'flex', gap: '10px', alignItems: 'center', justifyContent: 'space-between', marginBottom: '15px' }}>
        <h3 className="section-title" style={{ margin: 0, borderBottom: 'none', paddingBottom: 0 }}>ロケーション選択</h3>
        <a 
          href="https://gring2022.studio.site/location"
          target="_blank"
          rel="noopener noreferrer"
          className="btn btn-accent"
        >
          ロケーション詳細
        </a>
      </div>
      <div style={{ borderBottom: '2px solid #8A9195', marginBottom: '15px' }}></div>
      <select
        value={selectedLocation || ''}
        onChange={(e) => onLocationChange(e.target.value)}
      >
        <option value="">ロケーションを選択してください</option>
        {locations.map((location) => (
          <option key={location.id} value={location.id}>
            {location.name} - ¥{location.price.toLocaleString()}
          </option>
        ))}
      </select>
      {selectedLocation && locations.find(loc => loc.id === selectedLocation).description && (
        <div className="description">
          {locations.find(loc => loc.id === selectedLocation).description}
        </div>
      )}
    </div>
  );
}

// EstimationResult コンポーネント
function EstimationResult({ selectedPlan, selectedOptions, selectedLocation, onCopyResult }) {
  // オールインパッケージプランに含まれるオプションID
  const includedInAllInPackage = ['bride-rental', 'groom-rental', 'ishibashi-shimei'];
  
  // 選択されたプラン情報
  const planInfo = selectedPlan ? basePlans.find(plan => plan.id === selectedPlan) : null;
  
  // 選択されたオプション情報の配列
  const optionsInfo = selectedOptions.map(optId => options.find(opt => opt.id === optId));
  
  // 選択されたロケーション情報
  const locationInfo = selectedLocation ? locations.find(loc => loc.id === selectedLocation) : null;
  
  // オールインパッケージプランの場合に自動的に含まれるオプションの情報
  const includedOptionsInfo = selectedPlan === 'all-in'
    ? includedInAllInPackage.map(optId => options.find(opt => opt.id === optId))
    : [];
  
  // 合計金額計算
  let totalPrice = 0;
  
  // プラン料金
  if (planInfo) {
    totalPrice += planInfo.price;
  }
  
  // オプション料金（オールインパッケージプランに含まれるものは除外）
  optionsInfo.forEach(option => {
    if (!(selectedPlan === 'all-in' && includedInAllInPackage.includes(option.id))) {
      totalPrice += option.price;
    }
  });
  
  // ロケーション料金（オールインパッケージプランの場合は含まれるため0円）
  if (locationInfo && selectedPlan !== 'all-in') {
    totalPrice += locationInfo.price;
  }
  
  // コピー機能用のテキスト生成
  const generateCopyText = () => {
    let text = `【選択プラン】\n`;
    text += `- 基本プラン: ${planInfo ? planInfo.name : ''} - ¥${planInfo ? planInfo.price.toLocaleString() : 0}\n`;
    
    // オプション
    if (optionsInfo.length > 0 || includedOptionsInfo.length > 0) {
      text += `- オプション:\n`;
      
      // 選択したオプション（オールインパッケージプランに含まれるものは除外）
      optionsInfo.forEach(option => {
        if (!(selectedPlan === 'all-in' && includedInAllInPackage.includes(option.id))) {
          text += ` - ${option.name} - ¥${option.price.toLocaleString()}\n`;
        }
      });
      
      // オールインパッケージプランに含まれるオプション
      includedOptionsInfo.forEach(option => {
        text += ` - ${option.name} - ¥0 (プランに含まれる)\n`;
      });
    }
    
    // ロケーション
    if (locationInfo) {
      const locationPrice = selectedPlan === 'all-in' ? 0 : locationInfo.price;
      text += `- ロケーション: ${locationInfo.name} - ¥${locationPrice.toLocaleString()}${selectedPlan === 'all-in' ? ' (プランに含まれる)' : ''}\n`;
    }
    
    text += `\n【合計金額（税込み）】\n¥${totalPrice.toLocaleString()}`;
    
    return text;
  };
  
  const [copySuccess, setCopySuccess] = React.useState('');
  
  const handleCopy = () => {
    const textToCopy = generateCopyText();
    
    navigator.clipboard.writeText(textToCopy).then(() => {
      setCopySuccess('コピーしました！');
      setTimeout(() => setCopySuccess(''), 3000);
    }, () => {
      setCopySuccess('コピーに失敗しました');
    });
    
    if (onCopyResult) {
      onCopyResult();
    }
  };
  
  return (
    <div className="result-section">
      <h3 className="section-title">見積もり結果</h3>
      
      {planInfo ? (
        <>
          <div className="result-item">
            <div className="result-category">基本プラン</div>
            <div className="result-detail">
              <div>{planInfo.name}</div>
              <div>¥{planInfo.price.toLocaleString()}</div>
            </div>
          </div>
          
          {(optionsInfo.length > 0 || includedOptionsInfo.length > 0) && (
            <div className="result-item">
              <div className="result-category">オプション</div>
              
              {/* 選択したオプション（オールインパッケージプランに含まれるものは除外） */}
              {optionsInfo.map(option => (
                !(selectedPlan === 'all-in' && includedInAllInPackage.includes(option.id)) && (
                  <div className="result-detail" key={option.id}>
                    <div>{option.name}</div>
                    <div>¥{option.price.toLocaleString()}</div>
                  </div>
                )
              ))}
              
              {/* オールインパッケージプランに含まれるオプション */}
              {includedOptionsInfo.map(option => (
                <div className="result-detail" key={option.id}>
                  <div>{option.name}</div>
                  <div>¥0 (プランに含まれる)</div>
                </div>
              ))}
            </div>
          )}
          
          {locationInfo && (
            <div className="result-item">
              <div className="result-category">ロケーション</div>
              <div className="result-detail">
                <div>{locationInfo.name}</div>
                {selectedPlan === 'all-in' ? (
                  <div>¥0 (プランに含まれる)</div>
                ) : (
                  <div>¥{locationInfo.price.toLocaleString()}</div>
                )}
              </div>
            </div>
          )}
          
          <div className="total-price">
            合計金額（税込み）: ¥{totalPrice.toLocaleString()}
          </div>
          
          <div className="actions">
            <button className="btn" onClick={handleCopy}>
              見積もりをコピー
            </button>
            <a href="https://docs.google.com/forms/d/e/1FAIpQLScLmnfU16-SG8AwQQalF8vLTgUvIgMjs0ahhWzrm8vvRUc5XA/viewform"
               className="btn btn-accent"
               target="_blank"
               rel="noopener noreferrer">
              ご予約に進む
            </a>
            {copySuccess && <span className="copy-success">{copySuccess}</span>}
          </div>
          
          <div className="helper-text">
            プランについてご相談、ご質問がある際はこちらのコピーを公式ラインでお送りください。
          </div>
        </>
      ) : (
        <p>基本プランを選択してください</p>
      )}
    </div>
  );
}

// App コンポーネント
function App() {
  const [selectedPlan, setSelectedPlan] = React.useState(null);
  const [selectedOptions, setSelectedOptions] = React.useState([]);
  const [selectedLocation, setSelectedLocation] = React.useState('');
  const [showOptions, setShowOptions] = React.useState(false);
  
  // プラン変更時の処理
  const handlePlanChange = (planId) => {
    setSelectedPlan(planId);
    setShowOptions(true);
    // オプションの選択状態をリセット
    setSelectedOptions([]);
  };
  
  // オプション変更時の処理
  const handleOptionChange = (optionId) => {
    setSelectedOptions(prev => {
      if (prev.includes(optionId)) {
        return prev.filter(id => id !== optionId);
      } else {
        return [...prev, optionId];
      }
    });
  };
  
  // ロケーション変更時の処理
  const handleLocationChange = (locationId) => {
    setSelectedLocation(locationId || '');
  };
  
  return (
    <div className="container">
      <div className="header">
        <h1>GRING自動お見積り</h1>
      </div>
      <div className="content">
        <div className="form-section">
          <PlanSelector
            selectedPlan={selectedPlan}
            onPlanChange={handlePlanChange}
          />
          
          {showOptions && (
            <>
              <OptionSelector
                selectedPlan={selectedPlan}
                selectedOptions={selectedOptions}
                onOptionChange={handleOptionChange}
              />
              <LocationSelector
                selectedLocation={selectedLocation}
                onLocationChange={handleLocationChange}
              />
            </>
          )}
        </div>
        
        <EstimationResult
          selectedPlan={selectedPlan}
          selectedOptions={selectedOptions}
          selectedLocation={selectedLocation}
        />
      </div>
    </div>
  );
}

ReactDOM.render(<App />, document.getElementById('root'));
</script>
</body>
</html>
